import*as t from"react";import e from"signature_pad";var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)};var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e,n){var r=(n||{}).atBegin;return function(t,e,n){var r,i=n||{},o=i.noTrailing,a=void 0!==o&&o,s=i.noLeading,u=void 0!==s&&s,c=i.debounceMode,p=void 0===c?void 0:c,d=!1,f=0;function h(){r&&clearTimeout(r)}function l(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=this,c=Date.now()-f;function l(){f=Date.now(),e.apply(s,i)}function g(){r=void 0}d||(u||!p||r||l(),h(),void 0===p&&c>t?u?(f=Date.now(),a||(r=setTimeout(p?g:l,t))):l():!0!==a&&(r=setTimeout(p?g:l,void 0===p?t-c:t)))}return l.cancel=function(t){var e=(t||{}).upcomingOnly,n=void 0!==e&&e;h(),d=!n},l}(t,e,{debounceMode:!1!==(void 0!==r&&r)})}"function"==typeof SuppressedError&&SuppressedError;var o=function(o){function a(e){var n=o.call(this,e)||this;return n.canvasRef=t.createRef(),n.state={canvasWidth:0,canvasHeight:0},n.callResizeHandler=i(n.props.debounceInterval,n.handleResize.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(a,o),a.prototype.componentDidMount=function(){var t=this.canvasRef.current;t&&(this.props.width&&this.props.height||(t.style.width="100%",window.addEventListener("resize",this.callResizeHandler)),this.signaturePad=new e(t,this.props.options),this.scaleCanvas(t))},a.prototype.componentWillUnmount=function(){this.props.width&&this.props.height||window.removeEventListener("resize",this.callResizeHandler),this.signaturePad.off()},Object.defineProperty(a.prototype,"instance",{get:function(){return this.signaturePad},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"canvas",{get:function(){return this.canvasRef},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dotSize",{get:function(){return this.signaturePad.dotSize},set:function(t){this.signaturePad.dotSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"minWidth",{get:function(){return this.signaturePad.minWidth},set:function(t){this.signaturePad.minWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxWidth",{get:function(){return this.signaturePad.maxWidth},set:function(t){this.signaturePad.maxWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"throttle",{get:function(){return this.signaturePad.throttle},set:function(t){this.signaturePad.throttle=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"backgroundColor",{get:function(){return this.signaturePad.backgroundColor},set:function(t){this.signaturePad.backgroundColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"penColor",{get:function(){return this.signaturePad.penColor},set:function(t){this.signaturePad.penColor=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"velocityFilterWeight",{get:function(){return this.signaturePad.velocityFilterWeight},set:function(t){this.signaturePad.velocityFilterWeight=t},enumerable:!1,configurable:!0}),a.prototype.isEmpty=function(){return this.signaturePad.isEmpty()},a.prototype.clear=function(){this.signaturePad.clear()},a.prototype.fromDataURL=function(t,e){void 0===e&&(e={}),this.signaturePad.fromDataURL(t,e)},a.prototype.toDataURL=function(t,e){return this.signaturePad.toDataURL(t,e)},a.prototype.toSVG=function(t){return this.signaturePad.toSVG(t)},a.prototype.fromData=function(t){this.signaturePad.fromData(t)},a.prototype.toData=function(){return this.signaturePad.toData()},a.prototype.off=function(){this.signaturePad.off()},a.prototype.on=function(){this.signaturePad.on()},a.prototype.handleResize=function(){var t=this.canvasRef.current;t&&this.scaleCanvas(t)},a.prototype.scaleCanvas=function(t){var e=Math.max(window.devicePixelRatio||1,1),n=(this.props.width||t.offsetWidth)*e,r=(this.props.height||t.offsetHeight)*e,i=this.state,o=i.canvasWidth,a=i.canvasHeight;if(n!==o||r!==a){var s;this.props.redrawOnResize&&this.signaturePad&&!this.signaturePad.isEmpty()&&(s=this.signaturePad.toDataURL()),t.width=n,t.height=r,this.setState({canvasWidth:n,canvasHeight:r});var u=t.getContext("2d");u&&u.scale(e,e),s?this.signaturePad.fromDataURL(s):this.signaturePad&&this.signaturePad.clear()}},a.prototype.render=function(){var e=this.props.canvasProps;return t.createElement("canvas",r({"data-testid":"canvas-element",ref:this.canvasRef},e))},a.displayName="react-signature-pad-wrapper",a.defaultProps={redrawOnResize:!1,debounceInterval:150},a}(t.PureComponent);export{o as default};
