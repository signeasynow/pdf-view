import { h } from 'preact';
import styles from "./Select.module.css";
import ChevronDown from '../../assets/chevron-down.svg'; // Replace with the actual path
import ChevronDownWhite from '../../assets/chevron-down-white.svg'; // Replace with the actual path
import { Icon } from '../Icon/Icon';
import { ThemeContext } from '../../Theme';

export const Select = ({ options, value, onChange, width = 'auto', size = 'md' }) => (
  <ThemeContext.Consumer>
      {({ theme }) => (
        <div
          className={styles.selectContainer}
          data-size={size}
          style={{
            'background': theme.inputBackground,
          }}
        >
          <select onChange={onChange} value={value} className={styles.selectStyle} style={{ width, color: theme.text }}>
            {options.map((option, index) =>
              typeof option === 'string' ? (
                <option key={index} value={option}>{option}</option>
              ) : (
                <optgroup key={index} label={option.label}>
                  {option.options.map((subOption, subIndex) => (
                    <option key={subIndex} value={subOption}>{subOption}</option>
                  ))}
                </optgroup>
              ))}
          </select>
          <div className={styles.chevronIcon}>
            <Icon size="sm" src={theme.name === "dark" ? ChevronDownWhite : ChevronDown} alt="Arrow left" />
          </div>
        </div>
      )}
    </ThemeContext.Consumer>
);